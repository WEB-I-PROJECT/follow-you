<style>
    .search-bar-container {
        position: relative;
        width: 300px;
        margin-bottom: 10px;
    }

    .search-input {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
    }

    .search-icon {
        position: absolute;
        top: 50%;
        right: 1px;
        transform: translateY(-50%);
        cursor: pointer;
        background-color: #C4170C;
        padding: 10px;
        border-radius: 0 5px 5px 0;
    }

    .search-icon i {
        color: white;
    }
</style>


<div class="container"><br>
    <h2>Clientes Desativados</h2>
    <div class="search-bar-container">
    <input type="text" class="search-input" id="searchInput" placeholder="Pesquisar...">
    <div class="search-icon">
        <i class="bi bi-search"></i>
    </div>
    </div>
    <div class="container"><br>

     <div class="btn">
        <a href="/listar-aprovados" class="btn btn-success">Controle</a>
    </div>

        <table class="table table-striped table-bordered rounded shadow">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Usuário</th>
                    <th scope="col">CPF</th>
                    <th scope="col">Email</th>
                    <th scope="col">Telefone</th>
                    <th scope="col">Ativar</th>
                    
                </tr>
            <tbody>
                {{#each user}}
                {{#unless approved}}
                <tr>
                    <td>{{name}}</td>
                    <td>{{cpf}}</td>
                    <td>{{email}}</td>
                    <td>{{phone}}</td>
                    <td>
                         <form action="/approve-user/{{_id}}" method="POST" style="display:inline;">
                                        <button type="submit" class="btn btn-success"><i class="bi bi-check2-circle"></i>Ativar</button>
                        </form>
                    </td>
                   
                </tr>
            </tbody>
            </thead>

            {{/unless}}
            {{else}}
            <H4 class="mt-3">Nenhum usuário pendente!</H4>
            {{/each}}
        </table>


        <script>
    const searchInput = document.querySelector('.search-input');
    const searchIcon = document.querySelector('.search-icon');

    searchIcon.addEventListener('click', function() {
        searchTable();
    });

    searchInput.addEventListener('input', function() {
        searchTable();
    });

    function searchTable() {
        const searchTerm = searchInput.value.toLowerCase();

        const table = document.querySelector('.table');
        const rows = table.querySelectorAll('tbody tr');

        rows.forEach(row => {
            const cells = row.querySelectorAll('td');
            let found = false;

            cells.forEach(cell => {
                if (cell.textContent.toLowerCase().includes(searchTerm)) {
                    found = true;
                }
            });

            if (found) {
                row.style.display = 'table-row';
            } else {
                row.style.display = 'none';
            }
        });
    }
</script>